# å¤šå±¤å¼ DDoS é˜²ç¦¦ç³»çµ±ä¹‹å¯¦ä½œèˆ‡è©•ä¼°

ä½œè€…ï¼šâ€”  æ—¥æœŸï¼š2025-11-29  ç’°å¢ƒï¼šWindows + Python 3.11

## æ‘˜è¦
æœ¬ç ”ç©¶å¯¦ä½œä¸€å¥—ä»¥ Python ThreadingHTTPServer ç‚ºåŸºç¤ä¹‹å¤šå±¤ DDoS é˜²ç¦¦ç³»çµ±ï¼Œæ•´åˆ IP é»‘åå–®ï¼ˆ30 ç§’å°é–ï¼‰ã€10 ç§’æ»‘å‹•è¦–çª—é€Ÿç‡é™åˆ¶ï¼ˆ20 req/10sï¼‰ã€æ¯ IP é€£ç·šæ•¸ä¸Šé™èˆ‡è«‹æ±‚é©—è­‰ç­‰æ©Ÿåˆ¶ï¼Œä¸¦å»ºç«‹å¤šç¨®æ”»æ“Šå·¥å…·ï¼ˆHTTP Floodã€SYN Floodã€ç„¡æ¨™é ­è«‹æ±‚ï¼‰é€²è¡Œå£“åŠ›æ¸¬è©¦ã€‚å¯¦é©—é¡¯ç¤ºï¼š
- ä¿®æ­£ POST æ”»æ“Šåœ¨é˜²ç¦¦å‰å…ˆè®€å–è«‹æ±‚é«”å¾Œï¼Œå¯é¿å… TCP ç·©è¡é˜»å¡ï¼Œé¡¯è‘—é™ä½å»¶é²ä¸¦æå‡ååã€‚
- æ‡‰ç”¨å±¤ï¼ˆHTTPï¼‰æ”»æ“Šæœƒè¢«å¿«é€Ÿå›è¦† 403/429 è€Œéæ‹–æ…¢ä¼ºæœå™¨ï¼›ç¶²è·¯å±¤ï¼ˆSYN Floodï¼‰åœ¨ OS é˜²è­·ï¼ˆSYN cookiesï¼‰ä¸‹å°ç¶²é å›æ‡‰å½±éŸ¿æœ‰é™ã€‚
- åœ¨å¤šç·šç¨‹æƒ…å¢ƒä¸‹ï¼Œç³»çµ±å¯ç¶­æŒé«˜å›è¦†ç‡èˆ‡ä½éŒ¯èª¤ç‡ï¼Œä¸¦åœ¨é«˜ä¸¦ç™¼ä¸‹ä»èƒ½æœ‰æ•ˆæ””æˆªæƒ¡æ„æµé‡ã€‚

## 1. ç ”ç©¶èƒŒæ™¯èˆ‡å‹•æ©Ÿ
DDoS æ”»æ“Šå¯ç”±ç¶²è·¯å±¤ï¼ˆå¦‚ SYN Floodï¼‰æˆ–æ‡‰ç”¨å±¤ï¼ˆHTTP Floodï¼‰ç™¼èµ·ã€‚å–®ä¸€å±¤æ¬¡é˜²è­·å¸¸ä¸è¶³ï¼Œå› æ­¤æœ¬ç ”ç©¶çµåˆå¤šå±¤æ©Ÿåˆ¶ä¸¦ä»¥å¯è§€æ¸¬æ€§ï¼ˆ10 ç§’æ»‘å‹•è¦–çª—ï¼‰è¡¡é‡å³æ™‚è² è¼‰ï¼Œè—‰ç”±çœŸå¯¦å£“åŠ›æ¸¬è©¦è©•ä¼°æ•ˆæœã€‚

## 2. ç³»çµ±è¨­è¨ˆ
- ä¼ºæœå™¨ï¼š`server_defense.py`ï¼ˆç›£è½ `0.0.0.0:8001`ï¼‰
  - IP é»‘åå–®ï¼šè¶…é™å³å° 30 ç§’ã€‚
  - é€Ÿç‡é™åˆ¶ï¼š10 ç§’æ»‘å‹•è¦–çª—ï¼Œé è¨­ 20 req/10sã€‚
  - é€£æ¥ä¸Šé™ï¼šé™åˆ¶å–® IP ä¸¦ç™¼é€£ç·šæ•¸ã€‚
  - è«‹æ±‚é©—è­‰ï¼šæª¢æŸ¥å¿…è¦æ¨™é ­èˆ‡æ–¹æ³•ï¼Œç•°å¸¸å¿«é€Ÿæ‹’çµ•ã€‚
  - POST/PUT è«‹æ±‚ï¼šåœ¨é˜²ç¦¦åˆ¤æ–·å‰å…ˆè®€å– `Content-Length` æŒ‡å®šé•·åº¦ä¹‹è«‹æ±‚é«”ï¼Œé¿å… TCP ç·©è¡æ®˜ç•™å°è‡´å®¢æˆ¶ç«¯è¶…æ™‚ã€‚
- ç›£æ§ï¼šå³æ™‚è«‹æ±‚é€Ÿç‡ï¼ˆ10 ç§’çª—å£ï¼‰ã€è¿‘æœŸè«‹æ±‚èˆ‡æ””æˆªåŸå› çµ±è¨ˆã€æ•ˆèƒ½å ±è¡¨è¼¸å‡ºã€‚

## 3. æŒ‡æ¨™èˆ‡é‡æ¸¬æ–¹æ³•
- å»¶é²ï¼ˆLatencyï¼‰ï¼šå®¢æˆ¶ç«¯ç«¯åˆ°ç«¯é‡æ¸¬  \( L = t_{resp} - t_{send} \)ã€‚
- ååé‡/é€Ÿç‡ï¼ˆThroughputï¼‰ï¼š\( R = \frac{N_{req}}{T} \) req/sã€‚
- æˆåŠŸç‡ï¼ˆSuccess Rateï¼‰ï¼š\( S = \frac{N_{success}}{N_{success}+N_{fail}} \)ã€‚èªªæ˜ï¼šæœ¬ç ”ç©¶ä»¥ã€ŒæˆåŠŸæ”¶åˆ°ä¼ºæœå™¨å›æ‡‰ï¼ˆå« 403/429ï¼‰ã€è¦–ç‚ºæˆåŠŸï¼Œä»¥ä¾¿è©•ä¼°å¯ç”¨æ€§èˆ‡é˜²è­·æ•ˆç‡ï¼ˆå¿«é€Ÿæ‹’çµ•äº¦å±¬æˆåŠŸåœ°ä¿è­·è³‡æºï¼‰ã€‚

## 4. å¯¦é©—å·¥å…·èˆ‡æ”»æ“Šæ¨¡å‹
- HTTP Floodï¼š`http_flood_attack.py`ï¼ˆå®Œæ•´ TCP + HTTPï¼‰ï¼Œå¤š UA/æ¨™é ­ã€éš¨æ©Ÿåƒæ•¸é¿å…å¿«å–ï¼Œå¯è§¸ç™¼æ‡‰ç”¨å±¤é˜²ç¦¦ã€‚
- å¤šå®¢æˆ¶ç«¯æ¨¡æ“¬ï¼š`multi_client_attack.py`ï¼ˆå¤šåŸ·è¡Œç·’ã€å¤š UAï¼‰ï¼Œé‡å° `http://192.168.0.201:8001` æ¸¬è©¦ã€‚
- å½é€  IP çš„ SYN Floodï¼š`spoofed_ip_attack.py`ï¼ˆScapyï¼Œéœ€ç®¡ç†å“¡æ¬Šé™ï¼‰æ–¼ç¶²è·¯å±¤ç”¢ç”Ÿå¤§é‡ SYNï¼Œä½†é€šå¸¸ä¸å½±éŸ¿æ‡‰ç”¨å±¤å»¶é²ã€‚
- ç„¡æ¨™é ­è«‹æ±‚ï¼šæ¨¡æ“¬ä¸å®Œæ•´/ç•°å¸¸ HTTP è«‹æ±‚ï¼ˆNO_HEADERSï¼‰ã€‚

## 5. å¯¦é©—è¨­å®š
- ä½œæ¥­ç³»çµ±ï¼šWindowsï¼›Python 3.11ï¼›å¤šåŸ·è¡Œç·’ HTTP ä¼ºæœå™¨ã€‚
- ä¼ºæœå™¨ä½å€ï¼š`0.0.0.0:8001`ï¼ŒLANï¼š`192.168.0.201`ï¼Œæœ¬æ©Ÿï¼š`127.0.0.1`ã€‚
- æ¸¬è©¦åƒæ•¸ï¼š
  - ç·šç¨‹æ•¸ï¼š10ã€20ã€30ã€50ã€75ã€100ã€150ã€200ã€300ï¼ˆé€æ­¥å¢åŠ ï¼‰
  - POST è«‹æ±‚é«”ï¼š1,000 bytesï¼ˆç”¨ä»¥æ¸¬è©¦ã€Œå…ˆè®€å–å†æ‹’çµ•ã€ä¹‹æ•ˆç›Šï¼‰
  - è¶…æ™‚ï¼š5 ç§’ï¼›æŒ‡æ¨™æ¯ 2 ç§’æ›´æ–°ä¸€æ¬¡ã€‚

## 6. å¯¦é©—çµæœ
ç‚ºä¾¿æ–¼è¦–è¦ºåŒ–ç†è§£ï¼Œæˆ‘å€‘æä¾›å»¶é²èˆ‡ååé‡çš„æŠ˜ç·šåœ–ï¼ˆä»¥ä¸åŒç·šç¨‹æ•¸ç‚ºæ©«è»¸ï¼‰ã€‚å¯é€é `report/plot_results.py` ç”Ÿæˆä¸¦ä¿å­˜ PNGã€‚

ç”Ÿæˆåœ–è¡¨ï¼š
```powershell
python topic/DDos/report/plot_results.py
```

ç”¢ç”Ÿæª”æ¡ˆï¼š`fig_latency_get.png`, `fig_throughput_get.png`, `fig_latency_post.png`, `fig_throughput_post.png`, `fig_latency_noh.png`, `fig_throughput_noh.png`

### åœ– 1ï¼šGET å»¶é²èˆ‡åå
![GET Latency](fig_latency_get.png)

![GET Throughput](fig_throughput_get.png)

### åœ– 2ï¼šPOST å»¶é²èˆ‡ååï¼ˆä¿®æ­£å¾Œ/å•Ÿé˜²ç¦¦ï¼‰
![POST Latency](fig_latency_post.png)

![POST Throughput](fig_throughput_post.png)

### åœ– 3ï¼šNO_HEADERS å»¶é²èˆ‡åå
![NO_HEADERS Latency](fig_latency_noh.png)

![NO_HEADERS Throughput](fig_throughput_noh.png)
### 6.1 GET æ”»æ“Šï¼ˆä»£è¡¨æ‡‰ç”¨å±¤æ‹’çµ•å¿«é€Ÿã€è³‡æºå›æ”¶æœ‰æ•ˆï¼‰
ï¼ˆç¯€éŒ„ï¼‰
- 10 ç·šç¨‹ï½œæˆåŠŸ 926ï½œå¤±æ•— 0ï½œå»¶é² 87.1 msï½œé€Ÿç‡ 115.8 req/sï½œğŸŸ¢
- 100 ç·šç¨‹ï½œæˆåŠŸ 2150ï½œå¤±æ•— 0ï½œå»¶é² 385.3 msï½œé€Ÿç‡ 268.8 req/sï½œğŸŸ¢
- 300 ç·šç¨‹ï½œæˆåŠŸ 4530ï½œå¤±æ•— 0ï½œå»¶é² 559.4 msï½œé€Ÿç‡ 566.2 req/sï½œğŸŸ¡

è§£æï¼šå¤šæ•¸è«‹æ±‚è¢«å¿«é€Ÿæ‹’çµ•ï¼ˆ403/429ï¼‰ï¼Œå› æ­¤æ•´é«”ã€ŒæˆåŠŸæ”¶åˆ°å›æ‡‰ã€æ¯”ä¾‹é«˜ä¸”å»¶é²éš¨è² è¼‰æº«å’Œä¸Šå‡ï¼Œé¡¯ç¤ºé˜²ç¦¦èƒ½å¿«é€Ÿé‡‹æ”¾è³‡æºã€‚

### 6.2 POST æ”»æ“Šï¼ˆä¿®æ­£å‰å¾Œå°ç…§ï¼‰
ä¿®æ­£å‰ï¼šä¼ºæœå™¨åœ¨åˆ¤æ–·å‰æœªè®€å–è«‹æ±‚é«”â†’å®¢æˆ¶ç«¯ä»æŒçºŒç™¼é€ 1,000 bytesï¼ŒTCP ç·©è¡å›å£“å°è‡´é€£ç·šè®Šæ…¢èˆ‡è¶…æ™‚ã€‚

ä¿®æ­£ï¼ˆæ–¼åˆ¤æ–·å‰è®€å– `Content-Length` æŒ‡å®šé•·åº¦ä¸¦ä¸Ÿæ£„ï¼‰ï¼š
- 10 ç·šç¨‹ï½œæˆåŠŸ 7367ï½œå¤±æ•— 0ï½œå»¶é² 10.9 msï½œé€Ÿç‡ 920.9 req/sï½œğŸŸ¢
- 100 ç·šç¨‹ï½œæˆåŠŸ 6555ï½œå¤±æ•— 1ï½œå»¶é² 134.4 msï½œé€Ÿç‡ 819.4 req/sï½œğŸŸ¢
- 300 ç·šç¨‹ï½œæˆåŠŸ 13448ï½œå¤±æ•— 0ï½œå»¶é² 308.3 msï½œé€Ÿç‡ 1681.0 req/sï½œğŸŸ¢

è§£æï¼šä¿®æ­£å¾Œå¤§å¹…é™ä½å»¶é²ä¸”é¡¯è‘—æå‡ååï¼Œè­‰æ˜ã€Œå…ˆè®€å–å†æ‹’çµ•ã€å¯é¿å… TCP å±¤ç·©è¡é˜»å¡ã€‚

### 6.3 ç„¡æ¨™é ­ï¼ˆNO_HEADERSï¼‰æ”»æ“Š
- 10 ç·šç¨‹ï½œæˆåŠŸ 788ï½œå»¶é² 104.4 msï½œé€Ÿç‡ 98.5 req/sï½œğŸŸ¢
- 100 ç·šç¨‹ï½œæˆåŠŸ 2027ï½œå»¶é² 409.5 msï½œé€Ÿç‡ 253.4 req/sï½œğŸŸ¢
- 300 ç·šç¨‹ï½œæˆåŠŸ 4859ï½œå»¶é² 514.8 msï½œé€Ÿç‡ 607.4 req/sï½œğŸŸ¡

è§£æï¼šç•°å¸¸è«‹æ±‚è¢«å¿«é€Ÿè­˜åˆ¥ä¸¦æ‹’çµ•ï¼Œéš¨ä¸¦ç™¼ä¸Šå‡å»¶é²å¢åŠ æœ‰é™ã€‚

### 6.4 å•Ÿç”¨é˜²ç¦¦çš„ç¶œåˆçµæœï¼ˆç¯€éŒ„ï¼‰
GETï¼š
- 10/20/50/100/200/300 ç·šç¨‹ï½œé€Ÿç‡ç´„ 901.1 / 807.6 / 1032.4 / 1088.8 / 1413.4 / 2057.9 req/sï¼Œå»¶é² 11.1â€“259.1 msï¼Œå…¨éƒ¨ ğŸŸ¢ã€‚

POSTï¼š
- 10/50/100/200/300 ç·šç¨‹ï½œé€Ÿç‡ç´„ 395.0 / 683.2 / 676.8 / 1142.2 / 1875.0 req/sï¼Œå»¶é² 25.4â€“398.6 msï¼Œå¹¾è¿‘å…¨ç¶ ã€‚

NO_HEADERSï¼š
- 10/50/100/200/300 ç·šç¨‹ï½œé€Ÿç‡ç´„ 388.1 / 707.4 / 697.2 / 1222.4 / 1577.9 req/sï¼Œå»¶é² 26.1â€“594.5 msï¼Œå¤šæ•¸ ğŸŸ¢ã€‚

æ•´é«”è§€å¯Ÿï¼šé˜²ç¦¦é–‹å•Ÿå¾Œï¼Œä¼ºæœå™¨ä»¥ä½å»¶é²å¿«é€Ÿæ‹’çµ•æƒ¡æ„æµé‡ï¼Œååé¡¯è‘—æå‡ï¼ŒéŒ¯èª¤ç‡æ¥µä½ã€‚

### 6.5 SYN Floodï¼ˆå½é€ æº IPï¼‰
ä»¥ Scapy ç™¼é€ ~6,220 å€‹ä¾†è‡ªä¸åŒå½é€  IP çš„ SYN å°åŒ…ï¼ˆ30 ç§’ï¼Œ~500 ppsï¼‰ã€‚
- æ‡‰ç”¨å±¤è§€å¯Ÿï¼šå¹¾ä¹ç„¡å¡é “ï¼Œ`netstat` ç„¡å¤§é‡åŠé–‹é€£ç·šï¼›Windows SYN cookies ç”Ÿæ•ˆã€‚
- å»ºè­°ä»¥ Wireshark ä»¥ `tcp.port == 8001 && tcp.flags.syn == 1` è§€æ¸¬ç¶²è·¯å±¤æµé‡ã€‚

## 7. è¨è«–
- å¿«é€Ÿæ‹’çµ•èˆ‡å›æ‡‰ï¼ˆ403/429ï¼‰å¯è¦–ç‚ºæˆåŠŸåœ°é‡‹æ”¾è³‡æºï¼Œé¿å…ä½”ç”¨å·¥ä½œåŸ·è¡Œç·’å’Œ I/Oã€‚
- å…ˆè®€å– POST è«‹æ±‚é«”å†åˆ¤æ–·èƒ½é¿å… TCP èƒŒå£“é€ æˆçš„å»¶é²/è¶…æ™‚ï¼Œæ˜¯æ‡‰ç”¨å±¤é˜²ç¦¦å¯¦å‹™é—œéµã€‚
- ç¶²è·¯å±¤ï¼ˆSYNï¼‰é˜²è­·å¤šå€šè³´ OS/é˜²ç«ç‰†ï¼›æ‡‰ç”¨å±¤é˜²ç¦¦æ“…é•·å°æŠ— HTTP Flood èˆ‡ç•°å¸¸æµé‡ã€‚

## 8. é™åˆ¶
- åŒæ©Ÿæ¸¬è©¦æº IP å—é™ï¼ˆlocalhost/åŒä¸€ LANï¼‰ï¼Œå¤šä¾†æºçœŸå¯¦ HTTP æ”»æ“Šéœ€è·¨è£ç½®æˆ–ç•°åœ°ã€‚
- å¯¦é©—è‘—é‡ HTTP å±¤ï¼Œå°æ”¾å¤§å‹æ”»æ“Šï¼ˆDNS/SSDP/NTPï¼‰æœªç´å…¥ã€‚

## 9. æœªä¾†å·¥ä½œ
- åŠ å…¥ UDP/ICMP Floodã€SSL æ¡æ‰‹æ”¾å¤§ã€DNS æ”¾å¤§ã€WordPress pingback ç­‰æ”»æ“Šæ¨¡çµ„ã€‚
- ä»¥å¤šå°æ©Ÿå™¨èˆ‡ä¸åŒ AS/ISP ä¾†æºé€²è¡Œå¤§è¦æ¨¡å¯¦æ¸¬ã€‚
- å¼•å…¥è‡ªå‹•åŒ–èª¿åƒèˆ‡è‡ªé©æ‡‰é˜²ç¦¦ï¼ˆå‹•æ…‹èª¿æ•´é€Ÿç‡é–¾å€¼ã€é»‘åå–®æ™‚é•·ï¼‰ã€‚
- å„€è¡¨æ¿èˆ‡å‘Šè­¦ï¼šå³æ™‚å¯è¦–åŒ–è«‹æ±‚é€Ÿç‡ã€æ””æˆªåŸå› ã€é˜»æ“‹ IPã€ç¶²è·¯å‡ºé€é€Ÿç‡ã€‚

## 10. çµè«–
æœ¬ç ”ç©¶å±•ç¤ºäº†å¯åœ¨ä¸€èˆ¬ç’°å¢ƒä¸‹å¿«é€Ÿéƒ¨ç½²èˆ‡é©—è­‰çš„å¤šå±¤ DDoS é˜²ç¦¦ç³»çµ±ã€‚å¯¦é©—è­‰æ˜ï¼šå°æ‡‰ç”¨å±¤æ”»æ“Šï¼Œå¿«é€Ÿè®€å–è«‹æ±‚é«”ä¸¦ç«‹å³æ‹’çµ•å¯æœ‰æ•ˆé™ä½å»¶é²ä¸¦æå‡ååï¼›å°ç¶²è·¯å±¤æ”»æ“Šï¼Œä½œæ¥­ç³»çµ±æ©Ÿåˆ¶ï¼ˆå¦‚ SYN cookiesï¼‰æä¾›ç¬¬ä¸€å±¤ä¿è­·ã€‚æœªä¾†å°‡æ“´å……æ”»æ“Šå‹æ…‹èˆ‡å¤šä¾†æºæƒ…å¢ƒä»¥é€²ä¸€æ­¥é©—è­‰é˜²ç¦¦éŸŒæ€§ã€‚

---

### é™„éŒ„ Aï¼šé‡ç¾æ­¥é©Ÿï¼ˆæ“‡è¦ï¼‰
```powershell
# å•Ÿå‹•é˜²ç¦¦ä¼ºæœå™¨ï¼ˆç›£è½ 0.0.0.0:8001ï¼‰
python server_defense.py

# HTTP Floodï¼ˆæ‡‰ç”¨å±¤ï¼‰
python http_flood_attack.py

# å¤šå®¢æˆ¶ç«¯ï¼ˆæ‡‰ç”¨å±¤ï¼‰
python multi_client_attack.py

# SYN Floodï¼ˆå½é€  IPï¼Œéœ€è¦ç®¡ç†å“¡èˆ‡ Npcapï¼‰
python spoofed_ip_attack.py
```

### é™„éŒ„ Bï¼šé—œéµä¿®æ­£ï¼ˆPOST è«‹æ±‚ï¼‰
```python
# å¦‚æœæ˜¯ POST/PUT/PATCHï¼Œå…ˆè®€å–è«‹æ±‚é«”å†åˆ¤æ–·
if request_method in ['POST', 'PUT', 'PATCH']:
    content_length = int(self.headers.get('Content-Length', 0))
    if content_length > 0:
        self.rfile.read(content_length)
```

## åƒè€ƒæ–‡ç»
- RFC 4987: TCP SYN Flooding Attacks and Common Mitigations.
- RFC 7323: TCP Extensions for High Performanceï¼ˆSYN cookies èƒŒæ™¯å»¶ä¼¸ï¼‰ã€‚
- M. Prince, â€œDefending Against Layer 7 DDoS Attacks,â€ Cloudflare Blog, 2017.
- A. Popov et al., â€œTransport Layer Security (TLS) 1.3,â€ RFC 8446, 2018ã€‚
- OWASP: Denial of Service Cheat Sheetã€‚
